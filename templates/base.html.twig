<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}NovaERP - Dashboard
			{% endblock %}
		</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>‚ö´Ô∏è</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
		{% block stylesheets %}
			<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
			<style>
				/* Reset and Base Styles */
				* {
					margin: 0;
					padding: 0;
					box-sizing: border-box;
				}

				body {
					background: #f8f9fa;
					font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
					color: #1e293b;
				}

				/* Top Navbar */
				.top-navbar {
					position: fixed;
					top: 0;
					left: 0;
					right: 0;
					height: 70px;
					background: white;
					border-bottom: 1px solid #e2e8f0;
					display: flex;
					align-items: center;
					justify-content: space-between;
					padding: 0 2rem;
					z-index: 1000;
				}

				.navbar-brand-section {
					display: flex;
					align-items: center;
					gap: 0.75rem;
					text-decoration: none;
				}

				.navbar-brand {
					font-size: 1.5rem;
					font-weight: 700;
					color: #2563eb !important;
					text-decoration: none;
				}

				.navbar-brand svg {
					color: #2563eb;
					width: 28px;
					height: 28px;
				}

				.navbar-menu {
					display: flex;
					align-items: center;
					gap: 2rem;
					list-style: none;
					margin: 0;
					padding: 0;
				}

				.navbar-menu li a {
					color: #64748b;
					text-decoration: none;
					font-weight: 500;
					font-size: 0.95rem;
					transition: color 0.3s ease;
				}

				.navbar-menu li a:hover {
					color: #2563eb;
				}

				/* Dashboard Dropdown */
				.dashboard-dropdown {
					position: relative;
				}

				.dashboard-link {
					display: flex;
					align-items: center;
					gap: 0.5rem;
					cursor: pointer;
					padding: 0.5rem 1rem;
					border-radius: 8px;
					transition: all 0.3s ease;
				}

				.dashboard-link:hover {
					background: #f1f5f9;
				}

				.dashboard-dropdown .dropdown-menu {
					background: white;
					border: 1px solid #e2e8f0;
					border-radius: 12px;
					padding: 0.5rem;
					margin-top: 0.5rem;
					box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
					min-width: 220px;
				}

				.dashboard-dropdown .dropdown-item {
					color: #1e293b;
					padding: 0.75rem 1rem;
					transition: all 0.2s ease;
					display: flex;
					align-items: center;
					gap: 0.75rem;
					border-radius: 8px;
					font-size: 0.95rem;
					font-weight: 500;
				}

				.dashboard-dropdown .dropdown-item:hover {
					background: #f1f5f9;
					color: #2563eb;
				}

				.dashboard-icon {
					font-size: 1.125rem;
				}

				.navbar-right {
					display: flex;
					align-items: center;
					gap: 1.5rem;
				}

				.user-greeting {
					display: flex;
					align-items: center;
					gap: 0.75rem;
					padding: 0.5rem 1rem;
					background: #f1f5f9;
					border-radius: 10px;
				}

				.user-avatar {
					width: 32px;
					height: 32px;
					border-radius: 8px;
					background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
					color: white;
					display: flex;
					align-items: center;
					justify-content: center;
					font-weight: 700;
					font-size: 0.875rem;
				}

				.user-info {
					display: flex;
					flex-direction: column;
				}

				.user-name {
					font-weight: 600;
					font-size: 0.875rem;
					color: #1e293b;
				}

				.user-role {
					font-size: 0.75rem;
					color: #64748b;
				}

				.logout-btn {
					padding: 0.5rem 1.25rem;
					border-radius: 8px;
					background: #fee2e2;
					color: #dc2626;
					text-decoration: none;
					font-weight: 600;
					font-size: 0.875rem;
					border: 1px solid #fecaca;
					transition: all 0.3s ease;
					display: inline-block;
				}

				.logout-btn:hover {
					background: #fecaca;
					color: #991b1b;
					transform: translateY(-2px);
				}

				.loginBtn {
					background: #2563eb;
					color: white;
					text-decoration: none;
					padding: 0.625rem 1.5rem;
					border-radius: 8px;
					transition: all 0.3s ease;
					display: inline-block;
					font-weight: 600;
					font-size: 0.95rem;
				}

				.loginBtn:hover {
					background: #1d4ed8;
					color: white;
					transform: translateY(-2px);
					box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
				}

				/* Main Content */
				main {
					margin-top: 70px;
					min-height: calc(100vh - 70px);
				}

				/* Mobile Menu Toggle */
				.mobile-menu-toggle {
					display: none;
					background: none;
					border: none;
					color: #64748b;
					font-size: 1.5rem;
					cursor: pointer;
				}

				/* Responsive Design */
				@media(max-width: 992px) {
					.navbar-menu {
						display: none;
					}

					.mobile-menu-toggle {
						display: block;
					}

					.top-navbar {
						padding: 0 1rem;
					}

					.user-info {
						display: none;
					}
				}

				@media(max-width: 768px) {
					.user-greeting {
						padding: 0.5rem;
					}

					.navbar-right {
						gap: 0.75rem;
					}
				}

				/* Smooth scrolling */
				html {
					scroll-behavior: smooth;
				}
			</style>
		{% endblock %}

		{% block javascripts %}
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
		{% endblock %}
	</head>

	<body>
		<!-- Top Navbar -->
		<nav class="top-navbar">
			<a href="#home" class="navbar-brand-section">
				<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
					<path d="M10 12h4"></path>
					<path d="M10 8h4"></path>
					<path d="M14 21v-3a2 2 0 0 0-4 0v3"></path>
					<path d="M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2"></path>
					<path d="M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16"></path>
				</svg>
				<span class="navbar-brand">NovaERP</span>
			</a>

			<ul class="navbar-menu">
				<li>
					<a href="#home">Home</a>
				</li>
				<li>
					<a href="#about">About</a>
				</li>
				<li>
					<a href="#projects">Projects</a>
				</li>
				<li>
					<a href="#testimonials">Testimonials</a>
				</li>
				<li>
					<a href="#internships">Internships</a>
				</li>
				<li>
					<a href="#contact">Contact</a>
				</li>

				{# Dashboard Dropdown - Only show if user is authenticated #}
				{% if is_granted('IS_AUTHENTICATED_FULLY') %}
					<li class="dropdown dashboard-dropdown">
						<a class="dashboard-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							üìä Dashboard
						</a>
						<ul class="dropdown-menu">
							{% if is_granted('ROLE_SUPER_ADMIN') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_admin_index') }}">
										<span class="dashboard-icon">üëë</span>
										Admin Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_ADMIN') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_admin_index') }}">
										<span class="dashboard-icon">‚öôÔ∏è</span>
										Admin Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_HR') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_hr_index') }}">
										<span class="dashboard-icon">üë•</span>
										HR Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_FINANCE') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_finance_index') }}">
										<span class="dashboard-icon">üí∞</span>
										Finance Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_SALES') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_sales_index') }}">
										<span class="dashboard-icon">üìà</span>
										Sales Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_PROCUREMENT') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_procurement_index') }}">
										<span class="dashboard-icon">üì¶</span>
										Procurement Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_PRODUCTION') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_production_index') }}">
										<span class="dashboard-icon">üè≠</span>
										Production Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_PROJECT_MANAGER') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_projects_index') }}">
										<span class="dashboard-icon">üìã</span>
										Projects Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_STAFF') %}
								<li>
									<a class="dropdown-item" href="{{ path('dashboard_staff_index') }}">
										<span class="dashboard-icon">üë§</span>
										Staff Dashboard
									</a>
								</li>
							{% endif %}

							{% if is_granted('ROLE_GUEST') and not is_granted('ROLE_STAFF') %}
								<li>
									<a class="dropdown-item disabled" href="#">
										<span class="dashboard-icon">üîí</span>
										No Dashboard Access
									</a>
								</li>
							{% endif %}
						</ul>
					</li>
				{% endif %}
			</ul>

			<button class="mobile-menu-toggle">‚ò∞</button>

			<div class="navbar-right">
				{% if is_granted('IS_AUTHENTICATED_FULLY') %}
					<div class="user-greeting">
						<div class="user-avatar">
							{% if app.user.firstName %}
								{{ app.user.firstName|first|upper }}
							{% else %}
								U
							{% endif %}
						</div>
						<div class="user-info">
							<div class="user-name">
								{% if app.user.firstName %}
									{{ app.user.firstName }}
								{% else %}
									User
								{% endif %}
							</div>
							<div class="user-role">Manager</div>
						</div>
					</div>
					<a href="{{ path('app_logout') }}" class="logout-btn">Logout</a>
				{% else %}
					<a href="{{ path('access_erp') }}" class="loginBtn">Access Nova</a>
				{% endif %}
			</div>
		</nav>

		<!-- Main Content -->
		<main>
			{% block body %}{% endblock %}
		</main>
	</body>
</html>
